% natbib guide (https://gking.harvard.edu/files/natnotes2.pdf)
% \citet     #textual citations, print the abbreviated author list
% \citet*    #textual citations, print the full author list
% \citep     #parenthetical citations, print the abbreviated author list
% \citep*    #parenthetical citations, print the full author list
% \citealt    #the same as \citet but without any parentheses.
% \citealp    #the same as \citep but without any parentheses. 
% \citeauthor{ale91}         #Alex et al.
% \citeauthor*{ale91}        #Alex, Mathew, and Ravi
% \citeyear{ale91}           #1991 
% \citeyearpar{ale91}        #(1991)

\documentclass[english, xcolor=dvipsnames, aspectratio=169]{beamer}

% Text encoding
\usepackage[english]{babel}
\usepackage[export]{adjustbox}
\usepackage{tikz}
% Justify text (package and function)
% \apptocmd{command}{code}{success}{failure}
\usepackage{ragged2e}
\apptocmd{\frame}{}{\justifying}{} 
% Justify text in \item
\newcommand{\itemj}{\item \justifying}

% If...else package
\usepackage{ifthen}

% Package to set transparent background image
\usepackage{tikz}

% Include image package
\usepackage{graphicx}
% Set default path for images
\graphicspath{ {./imgs/} }
% Set figure number when included
\setbeamertemplate{caption}[numbered]

% Bibliography packages
\usepackage[sort, round]{natbib}
\bibliographystyle{plainnat}

% Define colors variables
\definecolor{darkblue}{rgb}{0.12, 0.139, 0.164} % primary color
\definecolor{grey}{rgb}{0.3686, 0.5255, 0.6235} % secondary color

% Set theme palette colors
\setbeamercolor{palette primary}{bg=darkblue,fg=white}
\setbeamercolor{palette secondary}{bg=darkblue,fg=white}
\setbeamercolor{palette tertiary}{bg=darkblue,fg=white}
\setbeamercolor{palette quaternary}{bg=darkblue,fg=white}
% strucure means itemize, enumerate, etc
\setbeamercolor{structure}{fg=darkblue} 

% Set bibliography colors
\setbeamercolor{bibliography item}{fg=darkblue}
\setbeamercolor{bibliography entry author}{fg=black}
\setbeamercolor{bibliography entry title}{fg=black}
\setbeamercolor{bibliography entry location}{fg=black}
\setbeamercolor{bibliography entry note}{fg=black}
% Replaces book icon in bibliography with enumeration
\setbeamertemplate{bibliography item}{[\theenumiv]}

% Table of contents style
% \setbeamertemplate{section in toc}[sections numbered]
% \setbeamertemplate{subsection in toc}[subsections numbered]
\setbeamertemplate{section in toc}[circle]
\setbeamertemplate{subsection in toc}[ball unnumbered]

% Header with navigation bar
\setbeamertemplate{headline}
{
    \leavevmode
    \hbox{
    \begin{beamercolorbox}[wd=\paperwidth,ht=2.5ex,dp=1.125ex]{palette quaternary}
    \insertsectionnavigationhorizontal{\paperwidth}{}{\hskip0pt plus1filll}
    \end{beamercolorbox} 
    }
}
% Footer with custom caption

\setbeamertemplate{footline}
{
    \leavevmode
    \hbox{
    \begin{beamercolorbox}[wd=.33\paperwidth,ht=2.6ex,dp=1ex,center]{palette quaternary}
    \usebeamerc{}\insertshortauthor\hspace*{1ex}
    \end{beamercolorbox}
    \begin{beamercolorbox}[wd=.33\paperwidth,ht=2.6ex,dp=1ex,center]{palette quaternary}
    \usebeamerfont{institute in head/foot}\insertshortinstitute
    \end{beamercolorbox}
    \begin{beamercolorbox}[wd=.33\paperwidth,ht=2.6ex,dp=1ex,center]{palette quaternary}
    \insertframenumber{} / \inserttotalframenumber
    \end{beamercolorbox}}
    \vskip0pt
    
}

% Global Background must be put in preamble
\usebackgroundtemplate
{
    \tikz\node{\includegraphics[height=\paperheight, width=\paperwidth]{background.pdf}};
}

% One line command to print table of contents - two parameters for modes
\newcommand{\customToC}[2]
{
    \begin{frame}{Overview}
    \tableofcontents[#1,#2]
    \end{frame}
}

% Command to plot centered figure
% Parameters: #1=image name, #2=caption 
\newcommand{\includefigure}[2]
{
    \begin{figure}[h]
    \caption{#2}
    \centering
    \includegraphics[width=0.5\textwidth]{#1}
    \end{figure}
}

% Command to plot larger figure
% Parameters: #1=image name, #2=caption 
\newcommand{\includefigurelarger}[2]
{
    \begin{figure}[h]
    \caption{#2}
    \centering
    \includegraphics[width=0.85\textwidth]{#1}
    \end{figure}
}

% Command to plot smaller figure
% Parameters: #1=image name, #2=caption 
\newcommand{\includefiguresmaller}[2]
{
    \begin{figure}[h]
    \caption{#2}
    \centering
    \includegraphics[width=0.25\textwidth]{#1}
    \end{figure}
}

% Command to plot medium sized figure
% Parameters: #1=image name, #2=caption 
\newcommand{\includefiguremedium}[2]
{
    \begin{figure}[h]
    \caption{#2}
    \centering
    \includegraphics[width=0.40\textwidth]{#1}
    \end{figure}
}


% Command to set section name as variable (\renewcommand to update)
\newcommand{\sectiontitle}{}
% Command to set subsection name as variable (\renewcommand to update)
\newcommand{\subsectiontitle}{}


% Title page
\title{The eNanoMapper Ontology}
\subtitle{Harnessing ontologies to enable data integration for nanomaterial risk assessment}
\author{Javier MillÃ¡n Acosta}
\institute{BiGCaT - Maastricht University}
% Date
\day=19\relax
\month=09\relax
\year=2022\relax

\begin{document}

\frame{\titlepage}

% Complete table of contents (ToC)
% \customToC{hideallsubsections}{}
\customToC{}{}

% Section name and highlighted ToC
\renewcommand{\sectiontitle}{Introduction}
\section{\sectiontitle}
\customToC{currentsection,hideothersubsections}{}

% Section name and highlighted ToC
\renewcommand{\subsectiontitle}{eNanoMapper}
\subsection{\subsectiontitle}
\begin{frame}{\subsectiontitle}
    \begin{itemize}
        \item \textbf{eNanoMapper} is a broader European project which aims to address data and model interoperability challenges for data management for engineered nanomaterial safety. 
        \item \textbf{The eNanoMapper ontology} is an application ontology and reuses parts of several ontologies to describe the full domain of nanomaterial safety assessment.
    \end{itemize}

\includefigure{eNanoMapper_LOGO.png}{The eNanoMapper logo}
\end{frame}

% 
\renewcommand{\subsectiontitle}{Engineered nanomaterials}
\subsection{\subsectiontitle}
\begin{frame}{\subsectiontitle}
 			\begin{itemize}
\item a
\item b
\item c
    		\end{itemize}

\end{frame}

% 
\renewcommand{\subsectiontitle}{Ontologies}
\subsection{\subsectiontitle}
\begin{frame}{\subsectiontitle}
 			\begin{itemize}
\item A formal representation of a set of concepts within a knowledge domain which can be used to a) define such domain; and b) reason about its properties \citet{source}  
\item It consists of three syntactical categories: \textbf{Entities}, \textbf{Expressions} and \textbf{Axioms}, which can be given annotations for further description.
    		\end{itemize}

                \includefiguresmaller{classhierarchy.png}{A class (highlighted in blue) in the hierarchy view of the ontology it is contained in.}

\end{frame}




% 


\begin{frame}{\subsectiontitle}
\begin{itemize}
\item All entities (classes, object properties, named individuals...) are uniquely identified by a sequence of characters called IRI.

\end{itemize}

 \includefigurelarger{class.pdf}{A class in an ontology text file (the ontology document). IRIs in blue.}
\end{frame}

%

\begin{frame}{\subsectiontitle}
    \begin{figure}
        \begin{minipage}[b]{0.55\linewidth}
 			\begin{itemize}
\item Most ontologies use the W3C standard language for ontologies, Web Ontology Language \textbf{OWL}.
\item OWL ontologies are mainly stored in \texttt{.owl} files, which are a sort of \textbf{RDF} document.
\item \textbf{RDF} (Resource Description Framework) is a standard for data exchange. It defines \textbf{triples} of \textbf{(subject, predicate, object)}.
\item These triples form labeled graphs where the edge (predicate) represents the link between two resources (subject and object)
    		\end{itemize}
        \end{minipage}
    \hfill
     \begin{minipage}[b]{0.4\linewidth}
            \centering
            \includefigurelarger{pizzaontology.png}{The pizza ontology, visualized as a graph (add source)}
        \end{minipage}
    \end{figure}
\end{frame}


% 
\begin{frame}{\subsectiontitle}

     
\begin{figure}
    
    \centering
	\includefigurelarger{rdf-graph-triple.pdf}{A graph with two nodes (Subject and Object) and a triple connecting them (Predicate)}
    \end{figure}
\end{frame}

% 
\begin{frame}{\subsectiontitle}

     
\begin{figure}
    \centering
	\includefigurelarger{rdf-owl.pdf}{The triple in the previous figure as expressed in the \texttt{.owl} document file of the ontology it is contained in.}
    \end{figure}
\end{frame}

% 

\begin{frame}{\subsectiontitle}
    \begin{itemize}
        \item \textbf{Foundation ontologies}: they provide the most abstract or general classes, i.e., the top-level classes we see in a hierarchy view of our ontology.
        \item \textbf{Application ontologies}:
        \item \textbf{Domain ontologies}
    \end{itemize}
\end{frame}

% Section name and highlighted ToC
\renewcommand{\sectiontitle}{The eNanoMapper Ontology}
\section{\sectiontitle}
\customToC{currentsection,hideothersubsections}{}


% 
\renewcommand{\subsectiontitle}{Development and QC}
\subsection{\subsectiontitle}

\begin{frame}{\subsectiontitle}
    Pointers about this...
    
\end{frame}

% 
\renewcommand{\subsectiontitle}{Composition of the eNanoMapper ontology}
\subsection{\subsectiontitle}

\begin{frame}{\subsectiontitle}
\includefigure{enm-structure.png}{eNM ontology yadda quote}
    https://faircookbook.elixir-europe.org/content/recipes/interoperability/ontology-robot-recipe.html make a similar figure!
\end{frame}

% 
\renewcommand{\subsectiontitle}{Uses of the eNM ontology}
\subsection{\subsectiontitle}

\begin{frame}{\subsectiontitle}
    Pointers about this...how do we add terms, etc
    
\end{frame}


%
\renewcommand{\sectiontitle}{Future plans and challenges}
\section{\sectiontitle}
\customToC{currentsection,hideothersubsections}{}

% 
\renewcommand{\subsectiontitle}{What is still needed}
\subsection{\subsectiontitle}

\begin{frame}{\subsectiontitle}
\begin{itemize}
    \item OWL is not the best at modularity, but the eNM ontology heavily relies on importing modules. This leads to complications in class hierarchies, duplicate imports, etc.
    \item This peculiarity
\end{itemize}
\end{frame}

% 
\renewcommand{\subsectiontitle}{Migrating the ontology development?}
\subsection{\subsectiontitle}
\begin{frame}{\subsectiontitle}
\centering
\begin{tikzpicture}[node distance={40mm}, thick, main/.style = {draw, square}] 
\node[main] (1) {eNanoMapper Ontology}; 
\node[main] (2) [above right of=1] {Internal terms}; 
\node[main] (3) [below right of=1] {External terms}; 
\node[main] (4) [right of=1] {Annotations}; 
\draw[->] (2) -- node[midway, sloped, above left, pos=0.1]{\textit{Manual curation}} (1); 
\draw[->] (3) -- node[midway, sloped, above left, pos=0.1]{\textit{ROBOT}} (1); 

\draw[->] (4) -- (1); 


\end{tikzpicture} 
\end{frame}



% Import bibliography from file sample.bib
\begin{frame}[t, allowframebreaks]
\frametitle{References}
\bibliography{sample}
\end{frame}

\end{document}